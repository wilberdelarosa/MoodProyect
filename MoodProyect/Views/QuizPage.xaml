<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:conv="clr-namespace:MoodProyect.Converters"
             x:Class="MoodProyect.Views.QuizPage"
             x:Name="quizPage">
    <ContentPage.Resources>
        <ResourceDictionary>
            <conv:BoolInverseConverter x:Key="BoolInverseConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    <VerticalStackLayout Padding="20" Spacing="20">
        <ProgressBar Progress="{Binding Progress}" />
        <Label Text="{Binding CurrentQuestion.Text}" FontSize="18" />
        <StackLayout IsVisible="{Binding CurrentQuestion.IsOpen, Converter={StaticResource BoolInverseConverter}}"
                     BindableLayout.ItemsSource="{Binding CurrentQuestion.Choices}">
            <BindableLayout.ItemTemplate>
                <DataTemplate>
                    <RadioButton Content="{Binding Text}"
                                 GroupName="choices"
                                 Command="{Binding BindingContext.SelectChoiceCommand, Source={x:Reference quizPage}}"
                                 CommandParameter="{Binding .}" />
                </DataTemplate>
            </BindableLayout.ItemTemplate>
        </StackLayout>
        <Entry IsVisible="{Binding CurrentQuestion.IsOpen}"
               Text="{Binding OpenAnswer}" Placeholder="Escribe tu respuesta" />
        <ActivityIndicator IsVisible="{Binding IsBusy}" IsRunning="{Binding IsBusy}" />
        <HorizontalStackLayout>
            <Button Text="Anterior" Command="{Binding PrevCommand}" />
            <Button Text="Siguiente" Command="{Binding NextCommand}" />
            <Button Text="Finalizar" Command="{Binding FinishCommand}" />
        </HorizontalStackLayout>
    </VerticalStackLayout>
</ContentPage>
